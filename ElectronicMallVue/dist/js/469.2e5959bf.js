"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[469],{6469:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-select",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{placeholder:"请选择订单类型"},model:{value:e.searchMode,callback:function(t){e.searchMode=t},expression:"searchMode"}},[a("el-option",{attrs:{value:"已支付",label:"已支付"}}),a("el-option",{attrs:{value:"已发货",label:"已发货"}}),a("el-option",{attrs:{value:"已收货",label:"已收货"}})],1),a("el-input",{staticStyle:{width:"200px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.load.apply(null,arguments)}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}},[a("i",{staticClass:"el-input__icon iconfont icon-r-find",attrs:{slot:"prefix"},slot:"prefix"})]),a("el-button",{staticStyle:{margin:"10px"},attrs:{type:"warning"},on:{click:e.reset}},[a("i",{staticClass:"iconfont icon-r-refresh"}),e._v(" 重置 ")]),a("el-button",{staticStyle:{margin:"10px"},attrs:{type:"primary"},on:{click:e.load}},[a("i",{staticClass:"iconfont icon-r-find"}),e._v(" 搜索 ")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50",sortable:""}}),a("el-table-column",{attrs:{prop:"orderNo",label:"订单编号",width:"200"}}),a("el-table-column",{attrs:{prop:"totalPrice",label:"总价",width:"100"}}),a("el-table-column",{attrs:{prop:"userId",label:"下单人id",width:"100"}}),a("el-table-column",{attrs:{prop:"linkUser",label:"联系人",width:"150"}}),a("el-table-column",{attrs:{prop:"linkPhone",label:"联系电话"}}),a("el-table-column",{attrs:{prop:"linkAddress",label:"送货地址",width:"300"}}),a("el-table-column",{attrs:{prop:"state",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["已支付"===t.row.state?a("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.state))]):e._e(),"已发货"===t.row.state?a("el-tag",{attrs:{type:"primary"}},[e._v(e._s(t.row.state))]):e._e(),"已收货"===t.row.state?a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.row.state))]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"下单时间"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:function(a){return e.showDetail(t.row)}}},[a("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"22px"}}),e._v(" 详情 ")]),"已支付"===t.row.state?a("el-popconfirm",{attrs:{title:"确定发货吗？"},on:{confirm:function(a){return e.delivery(t.row)}}},[a("el-button",{staticStyle:{"font-size":"18px","margin-left":"10px"},attrs:{slot:"reference",type:"primary"},slot:"reference"},[a("i",{staticClass:"iconfont icon-r-add",staticStyle:{"font-size":"22px"}}),e._v(" 发货 ")])],1):e._e()]}}])})],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.pageNum,"page-size":e.pageSize,"page-sizes":[3,5,8,10],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-table",{attrs:{data:e.detail,"background-color":"black"}},[a("el-table-column",{attrs:{label:"图片",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:e.baseApi+t.row.img,"min-width":"100",height:"100"}})]}}])}),a("el-table-column",{attrs:{prop:"goodId",label:"商品id"}}),a("el-table-column",{attrs:{prop:"goodName",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"standard",label:"商品规格"}}),a("el-table-column",{attrs:{prop:"price",label:"单价"}}),a("el-table-column",{attrs:{prop:"discount",label:"折扣"}}),a("el-table-column",{attrs:{label:"实价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.price*t.row.discount)+" ")]}}])}),a("el-table-column",{attrs:{prop:"count",label:"数量"}}),a("el-table-column",{attrs:{label:"总价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.price*t.row.discount*t.row.count)+" ")]}}])})],1)],1)],1)},r=[],s=a(5972);const o="/api/order/";var i={name:"Order",data(){return{options:[],searchMode:"",searchText:"",user:{},tableData:[],pageNum:1,pageSize:8,entity:{},total:0,dialogFormVisible:!1,detail:[],baseApi:this.$store.state.baseApi}},created(){this.load()},methods:{handleSizeChange(e){this.pageSize=e,this.load()},handleCurrentChange(e){this.pageNum=e,this.load()},reset(){this.searchMode="",this.searchText="",this.load()},load(){s.Z.get(o+"/page",{params:{pageNum:this.pageNum,pageSize:this.pageSize,orderNo:this.searchText,state:this.searchMode}}).then((e=>{this.tableData=e.data.records||[],this.total=e.data.total})).catch((e=>{void 0==e.response.data?this.$message({showClose:!0,message:e,type:"error",duration:5e3}):this.$message({showClose:!0,message:e.response.data,type:"error",duration:5e3})}))},showDetail(e){this.request.get("/api/order/orderNo/"+e.orderNo).then((e=>{"200"===e.code&&(this.detail=[],this.detail.push(e.data),this.dialogFormVisible=!0)}))},delivery(e){this.request.get("/api/order/delivery/"+e.orderNo).then((t=>{"200"===t.code&&(this.$message.success("成功发货"),e.state="已发货")}))}}},n=i,c=a(1001),p=(0,c.Z)(n,l,r,!1,null,"89b56188",null),d=p.exports}}]);
//# sourceMappingURL=469.2e5959bf.js.map