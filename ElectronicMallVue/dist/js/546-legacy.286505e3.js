(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[546],{9546:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return u}});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"demo-input-size"},[n("el-input",{staticStyle:{width:"250px","padding-right":"5px"},attrs:{placeholder:"请输入文件名","prefix-icon":"iconfont icon-r-find"},model:{value:t.fileName,callback:function(e){t.fileName=e},expression:"fileName"}}),n("el-button",{attrs:{type:"primary"},on:{click:t.search}},[n("i",{staticClass:"iconfont icon-r-find",staticStyle:{"padding-right":"6px"}}),t._v(" 搜索 ")]),n("el-button",{attrs:{type:"warning"},on:{click:t.reload}},[n("i",{staticClass:"iconfont icon-r-refresh",staticStyle:{"padding-right":"6px"}}),t._v(" 重置 ")])],1),n("div",{staticStyle:{"padding-top":"10px"}},[n("el-upload",{staticStyle:{display:"inline-block"},attrs:{action:"http://localhost:9191/file/upload","show-file-list":!1,"on-success":t.handleFileUploadSuccess}},[n("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"}},[n("i",{staticClass:"el-icon-a-032",staticStyle:{"padding-right":"6px；font-size: 22px"}}),t._v("上传")])],1),n("el-button",{staticStyle:{"margin-left":"10px","font-size":"18px"},attrs:{type:"danger"},on:{click:t.delBatch}},[n("i",{staticClass:"iconfont icon-r-delete",staticStyle:{"padding-right":"6px","font-size":"22px"}}),t._v("批量删除")])],1),n("el-table",{attrs:{data:t.tableData,"background-color":"black"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection"}}),n("el-table-column",{attrs:{prop:"name",label:"文件名",width:"350"}}),n("el-table-column",{attrs:{prop:"type",label:"文件类型",width:"180"}}),n("el-table-column",{attrs:{prop:"size",label:"文件大小",width:"180"}}),n("el-table-column",{attrs:{label:"操作",width:"240",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{attrs:{href:t.baseApi+e.row.url}},[n("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"success"}},[n("i",{staticClass:"iconfont icon-r-bottom",attrs:{stye:"font-size: 26px;"}}),t._v(" 下载 ")])],1),n("el-button",{staticStyle:{"margin-left":"10px","font-size":"18px"},attrs:{type:"danger"},on:{click:function(n){return t.handleDelete(e.row.id)}}},[n("i",{staticClass:"iconfont icon-r-delete",staticStyle:{"font-size":"22px"}}),t._v(" 删除 ")])]}}])})],1),n("div",{staticClass:"block",staticStyle:{flex:"0 0 auto"}},[n("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[3,5,8,10],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentPage}})],1)],1)},i=[],r=n(7965),o=(n(6977),n(1249),{name:"File",created:function(){this.load()},data:function(){return{baseApi:this.$store.state.baseApi,tableData:[],total:0,pageSize:5,currentPage:1,fileName:"",multipleSelection:[]}},methods:{handleSizeChange:function(t){this.pageSize=t,this.load()},handleCurrentPage:function(t){this.currentPage=t,this.load()},handleSelectionChange:function(t){this.multipleSelection=t},handleFileUploadSuccess:function(){this.$message.success("上传成功"),this.load()},handleEnable:function(t){var e=this;this.request.get("/file/enable",{params:{id:t.id,enable:t.enable}}).then((function(t){"200"===t.code?(e.$message({type:"success",message:"修改成功",duration:3e3}),e.load()):e.$message.error(t.msg)}))},load:function(){var t=this;this.request.get("/file/page",{params:{pageNum:this.currentPage,pageSize:this.pageSize,fileName:this.fileName}}).then((function(e){if("200"===e.code){t.tableData=e.data.records;var n,a=(0,r.Z)(t.tableData);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=i.size;i.size=o<1024?o+" Kb":o>1024&&o<1048576?(o/1024).toFixed(2)+" Mb":o/1024/1024..toFixed(2)+" Gb"}}catch(l){a.e(l)}finally{a.f()}t.total=e.data.total}}))},search:function(){this.currentPage=1,this.load()},reload:function(){this.fileName="",this.load()},handleDelete:function(t){var e=this;this.$confirm("确认删除该文件吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.request.delete("/file/"+t).then((function(t){"200"===t.code?(e.$message({type:"success",message:"删除成功",duration:3e3}),e.load()):e.$message.error(t.msg)}))}))},delBatch:function(){var t=this,e=this.multipleSelection.map((function(t){return t.id}));this.$confirm("确认删除这些用户吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.request.post("/file/del/batch",e).then((function(e){"200"===e.code?(t.$message({type:"success",message:"删除成功",duration:3e3}),t.load()):t.$message.error(e.msg)}))}))}}}),l=o,s=n(1001),c=(0,s.Z)(l,a,i,!1,null,"90b9b166",null),u=c.exports},1038:function(t,e,n){var a=n(2109),i=n(8457),r=n(7072),o=!r((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:o},{from:i})},7965:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});n(2526),n(1817),n(1539),n(2165),n(8783),n(3948),n(1703),n(7042),n(8309),n(1038),n(4916),n(7601);function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function i(t,e){if(t){if("string"===typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){s=!0,o=t},f:function(){try{l||null==n["return"]||n["return"]()}finally{if(s)throw o}}}}}}]);
//# sourceMappingURL=546-legacy.286505e3.js.map