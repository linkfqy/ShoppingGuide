"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[338],{3780:function(t,e,a){a.d(e,{Z:function(){return l}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:24}},[a("div",{staticClass:"search",staticStyle:{display:"inline-block"}},[a("div",{staticStyle:{height:"60px","margin-left":"30px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],attrs:{type:"text",placeholder:"请输入商品"},domProps:{value:t.searchText},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$emit("search",t.searchText)},input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),a("button",{on:{click:function(e){return t.$emit("search",t.searchText)}}})])])])],1)},n=[],i={name:"Search",data:function(){return{searchText:""}},mounted:function(){}},s=i,o=a(1001),c=(0,o.Z)(s,r,n,!1,null,"751d75fc",null),l=c.exports},1338:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("search",{on:{search:t.handleSearch}}),a("div",{staticClass:"main-box"},[a("div",{staticStyle:{margin:"20px auto"}},[t._m(0),a("el-row",{staticStyle:{"font-size":"18px"},attrs:{gutter:20}},t._l(t.icons,(function(e,r){return a("el-col",{key:r,attrs:{span:6}},[a("i",{staticClass:"iconfont",domProps:{innerHTML:t._s(e.value)},on:{click:function(a){return t.showSubcategoryGoods(e.categories)}}}),t._l(e.categories,(function(r,n){return a("span",{key:n},[a("b",[a("a",{class:{black:t.categoryId==r.id,grey:t.categoryId!=r.id},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.load(r.id)}}},[a("span",[t._v(" "+t._s(r.name))])])]),n!=e.categories.length-1?a("span",[t._v(" / ")]):t._e()])}))],2)})),1),a("hr"),a("el-row",{attrs:{gutter:20}},t._l(t.good,(function(e){return a("el-col",{key:e.id,staticStyle:{"margin-bottom":"20px"},attrs:{span:6}},[a("router-link",{attrs:{to:"goodview/"+e.id}},[a("el-card",{attrs:{"body-style":{padding:"0px",background:"#e3f5f4"}}},[a("img",{staticStyle:{width:"100%",height:"300px"},attrs:{src:t.baseApi+e.imgs}}),a("div",{staticStyle:{padding:"5px 10px"}},[a("span",{staticStyle:{"font-size":"18px"}},[t._v(t._s(e.name))]),a("br"),a("span",{staticStyle:{color:"red","font-size":"15px"}},[t._v("￥"+t._s(e.price))])])])],1)],1)})),1)],1),a("div",{staticClass:"block",staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{background:"","hide-on-single-page":!1,"current-page":t.currentPage,"page-size":t.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentPage}})],1)])],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",{staticClass:"cate",staticStyle:{"font-size":"24px"}},[a("i",{staticClass:"iconfont icon-r-list",staticStyle:{"font-size":"30px"}}),t._v(" 选择商品分类 ")])}],i=(a(9653),a(1249),a(3780)),s={name:"GoodList",data:function(){return{icons:[],total:0,pageSize:9,currentPage:1,categoryId:Number,searchText:"",good:[],baseApi:this.$store.state.baseApi}},components:{search:i.Z},created:function(){this.searchText=this.$route.query.searchText,this.categoryId=this.$route.query.categoryId,this.loadCategories(),this.load()},methods:{loadCategories:function(){var t=this;this.request.get("/api/icon").then((function(e){"200"===e.code&&(t.icons=e.data)}))},handleCurrentPage:function(t){this.currentPage=t,this.load()},handleSearch:function(t){this.searchText=t,this.load()},load:function(t){var e=this;void 0!=t&&(this.categoryId=t,this.$router.push({path:"/goodlist",query:{categoryId:this.categoryId}})),this.request.get("/api/good/page",{params:{pageNum:this.currentPage,pageSize:this.pageSize,searchText:this.searchText,categoryId:this.categoryId}}).then((function(t){"200"===t.code&&(e.total=t.data.total,e.good=t.data.records)}))},showSubcategoryGoods:function(t){var e=t.map((function(t){return t.id}));this.categoryId=e,this.load(e)}}},o=s,c=a(1001),l=(0,c.Z)(o,r,n,!1,null,"4eee8535",null),u=l.exports}}]);
//# sourceMappingURL=338-legacy.f49512f9.js.map