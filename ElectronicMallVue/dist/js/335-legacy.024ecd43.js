"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[335],{1335:function(t,e,i){i.r(e),i.d(e,{default:function(){return p}});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticStyle:{padding:"5px 0"}},[i("el-input",{staticStyle:{width:"200px"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.load.apply(null,arguments)}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}},[i("i",{staticClass:"el-input__icon iconfont icon-r-find",attrs:{slot:"prefix"},slot:"prefix"})]),i("br"),i("el-button",{staticStyle:{margin:"5px"},attrs:{type:"primary"},on:{click:t.load}},[i("i",{staticClass:"iconfont icon-r-find"}),t._v(" 搜索 ")]),i("el-button",{staticStyle:{margin:"5px"},attrs:{type:"warning"},on:{click:t.reset}},[i("i",{staticClass:"iconfont icon-r-refresh"}),t._v(" 重置 ")]),i("el-button",{staticStyle:{margin:"5px","font-size":"18px"},attrs:{type:"success"},on:{click:t.add}},[i("i",{staticClass:"iconfont icon-r-add",staticStyle:{"font-size":"22px"}}),t._v(" 新增 ")])],1),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[i("el-table-column",{attrs:{prop:"id",label:"商品id",width:"80px"}}),i("el-table-column",{attrs:{prop:"name",label:"商品名称"}}),i("el-table-column",{attrs:{label:"商品图片",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("img",{staticStyle:{width:"90px",height:"80px"},attrs:{src:t.baseApi+e.row.imgs}})]}}])}),i("el-table-column",{attrs:{prop:"description",label:"商品描述"}}),i("el-table-column",{attrs:{prop:"discount",label:"折扣"}}),i("el-table-column",{attrs:{prop:"sales",label:"销量"}}),i("el-table-column",{attrs:{prop:"saleMoney",label:"销售额（元)"}}),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.createTime.replace(" ","  "))+" ")]}}])}),i("el-table-column",{attrs:{label:"推荐",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(i){return t.handleRecommend(e.row)}},model:{value:e.row.recommend,callback:function(i){t.$set(e.row,"recommend",i)},expression:"scope.row.recommend"}})]}}])}),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:function(i){return t.edit(e.row)}}},[i("i",{staticClass:"el-icon-a-032",staticStyle:{"font-size":"22px"}}),t._v(" 修改 ")]),i("el-popconfirm",{attrs:{title:"确定删除？"},on:{confirm:function(i){return t.del(e.row.id)}}},[i("el-button",{staticStyle:{"font-size":"18px","margin-left":"10px"},attrs:{slot:"reference",type:"danger"},slot:"reference"},[i("i",{staticClass:"iconfont icon-r-delete",staticStyle:{"font-size":"22px"}}),t._v(" 删除 ")])],1)]}}])})],1),i("div",{staticStyle:{"margin-top":"10px"}},[i("el-pagination",{attrs:{"current-page":t.pageNum,"page-size":t.pageSize,"page-sizes":[3,5,8,10],layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),i("el-dialog",{attrs:{title:"信息",visible:t.dialogFormVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{attrs:{model:t.entity}},[i("el-form-item",{attrs:{label:"商品名称","label-width":"150px"}},[i("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off"},model:{value:t.entity.name,callback:function(e){t.$set(t.entity,"name",e)},expression:"entity.name"}})],1),i("el-form-item",{attrs:{label:"商品描述","label-width":"150px"}},[i("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off"},model:{value:t.entity.description,callback:function(e){t.$set(t.entity,"description",e)},expression:"entity.description"}})],1),i("el-form-item",{attrs:{label:"折扣","label-width":"150px"}},[i("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off"},model:{value:t.entity.discount,callback:function(e){t.$set(t.entity,"discount",e)},expression:"entity.discount"}})],1),i("el-form-item",{attrs:{label:"分类id","label-width":"150px"}},[i("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off"},model:{value:t.entity.categoryId,callback:function(e){t.$set(t.entity,"categoryId",e)},expression:"entity.categoryId"}})],1),i("el-form-item",{attrs:{label:"商品图片","label-width":"150px"}},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:t.baseApi+"/file/upload","file-list":t.fileList,"on-change":t.handleChange,limit:2,"on-success":t.handleImgSuccess,"auto-upload":!1}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticStyle:{"font-size":"20px"},on:{click:function(e){t.dialogFormVisible=!1}}},[i("i",{staticClass:"iconfont icon-r-left",staticStyle:{"font-size":"22px"}}),t._v(" 取消")]),i("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"primary"},on:{click:t.save}},[i("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"22px"}}),t._v(" 确定")])],1)],1)],1)},s=[],l=(i(8862),i(7042),i(5972)),o="/api/good/",n={name:"Goods",data:function(){return{baseApi:this.$store.state.baseApi,fileList:[],options:[],searchText:"",user:{},tableData:[],pageNum:1,pageSize:5,entity:{},total:0,dialogFormVisible:!1}},created:function(){this.user=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{},this.load()},methods:{handleSizeChange:function(t){this.pageSize=t,this.load()},handleCurrentChange:function(t){this.pageNum=t,this.load()},handleRecommend:function(t){var e=this;l.Z.get(o+"recommend",{params:{id:t.id,isRecommend:t.recommend}}).then((function(t){"200"===t.code?e.$message.success("修改成功"):e.$message.error(t.msg)}))},load:function(){var t=this;l.Z.get(o+"fullPage",{params:{pageNum:this.pageNum,pageSize:this.pageSize,searchText:this.searchText}}).then((function(e){t.tableData=e.data.records,t.total=e.data.total}))},reset:function(){this.searchText="",this.load()},add:function(){this.$router.push("goodInfo")},edit:function(t){this.entity=JSON.parse(JSON.stringify(t)),this.$router.push({name:"goodInfo",query:{good:JSON.stringify(this.entity)}})},handleImgSuccess:function(t){var e=this;this.entity.imgs=t.data,l.Z.post(o,this.entity).then((function(t){"200"===t.code?e.$message({type:"success",message:"操作成功"}):e.$message({type:"error",message:t.msg}),e.load(),e.dialogFormVisible=!1}))},save:function(){var t=this;console.log(this.fileList),0!==this.fileList.length?(console.log("上传中"),this.$refs.upload.submit()):(console.log(this.entity),l.Z.post(o,this.entity).then((function(e){"200"===e.code?t.$message({type:"success",message:"操作成功"}):t.$message({type:"error",message:e.msg}),t.load(),t.dialogFormVisible=!1})))},del:function(t){var e=this;l.Z["delete"](o+t).then((function(t){e.$message({type:"success",message:"操作成功"}),e.load()}))},handleChange:function(t,e){this.fileList=e.slice(-3)}}},r=n,c=i(1001),u=(0,c.Z)(r,a,s,!1,null,"e4533b64",null),p=u.exports}}]);
//# sourceMappingURL=335-legacy.024ecd43.js.map