{"version":3,"file":"js/603.a43e7194.js","mappings":"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","sources":["webpack://vue/./src/views/manage/good/GoodInfo.vue?411b","webpack://vue/src/views/manage/good/GoodInfo.vue","webpack://vue/./src/views/manage/good/GoodInfo.vue?0e2f","webpack://vue/./src/views/manage/good/GoodInfo.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"1000px\",\"margin\":\"50px auto\"}},[_c('el-form',{attrs:{\"model\":_vm.good}},[_c('el-form-item',{attrs:{\"label\":\"商品名称\",\"label-width\":\"150px\"}},[_c('el-input',{staticStyle:{\"width\":\"80%\"},attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.good.name),callback:function ($$v) {_vm.$set(_vm.good, \"name\", $$v)},expression:\"good.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品描述\",\"label-width\":\"150px\"}},[_c('el-input',{staticStyle:{\"width\":\"80%\"},attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.good.description),callback:function ($$v) {_vm.$set(_vm.good, \"description\", $$v)},expression:\"good.description\"}})],1),_c('el-form-item',{attrs:{\"label\":\"规格\",\"label-width\":\"150px\"}},[_vm._l((_vm.standards),function(standard,index){return _c('el-tag',{key:index,staticStyle:{\"margin-right\":\"10px\"},attrs:{\"closable\":\"\",\"disable-transitions\":true},on:{\"close\":function($event){return _vm.handleClose(standard)},\"click\":function($event){return _vm.editStandard(index)}}},[_vm._v(_vm._s(standard.value))])}),_c('el-button',{attrs:{\"icon\":\"el-icon-plus\",\"circle\":\"\"},on:{\"click\":_vm.addStandard}})],2),_c('el-form-item',{attrs:{\"label\":\"折扣\",\"label-width\":\"150px\"}},[_c('el-input',{staticStyle:{\"width\":\"80%\"},attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.good.discount),callback:function ($$v) {_vm.$set(_vm.good, \"discount\", $$v)},expression:\"good.discount\"}})],1),_c('el-form-item',{attrs:{\"label\":\"分类\",\"label-width\":\"150px\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.good.categoryId),callback:function ($$v) {_vm.$set(_vm.good, \"categoryId\", $$v)},expression:\"good.categoryId\"}},_vm._l((_vm.categoryItems),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"商品图片\",\"label-width\":\"150px\"}},[_c('el-upload',{ref:\"upload\",staticClass:\"upload-demo\",attrs:{\"action\":_vm.baseApi + '/file/upload',\"file-list\":_vm.fileList,\"on-change\":_vm.handleChange,\"limit\":1,\"on-remove\":_vm.handleRemove,\"on-success\":_vm.handleImgSuccess,\"auto-upload\":false}},[_c('el-button',{attrs:{\"slot\":\"trigger\",\"size\":\"small\",\"type\":\"primary\"},slot:\"trigger\"},[_vm._v(\"选取文件\")]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\" 只能上传一个jpg/png文件，且不超过500kb \")])],1)],1),_c('el-form-item',{attrs:{\"label-width\":\"150px\"}},[_c('el-button',{staticStyle:{\"font-size\":\"20px\"},attrs:{\"type\":\"success\"},on:{\"click\":_vm.submit}},[_c('i',{staticClass:\"iconfont icon-r-yes\",staticStyle:{\"font-size\":\"22px\"}}),_vm._v(\"提交\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"规格信息\",\"visible\":_vm.dialogFormVisible,\"width\":\"30%\",\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{attrs:{\"model\":_vm.standard}},[_c('el-form-item',{attrs:{\"label\":\"规格名称\",\"label-width\":\"150px\"}},[_c('el-input',{staticStyle:{\"width\":\"80%\"},attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.standard.value),callback:function ($$v) {_vm.$set(_vm.standard, \"value\", $$v)},expression:\"standard.value\"}})],1),_c('el-form-item',{attrs:{\"label\":\"价格\",\"label-width\":\"150px\"}},[_c('el-input',{staticStyle:{\"width\":\"80%\"},attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.standard.price),callback:function ($$v) {_vm.$set(_vm.standard, \"price\", $$v)},expression:\"standard.price\"}})],1),_c('el-form-item',{attrs:{\"label\":\"库存\",\"label-width\":\"150px\"}},[_c('el-input',{staticStyle:{\"width\":\"80%\"},attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.standard.store),callback:function ($$v) {_vm.$set(_vm.standard, \"store\", $$v)},expression:\"standard.store\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{staticStyle:{\"font-size\":\"20px\"},on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_c('i',{staticClass:\"iconfont icon-r-left\",staticStyle:{\"font-size\":\"22px\"}}),_vm._v(\" 取消\")]),_c('el-button',{staticStyle:{\"font-size\":\"20px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveStandard}},[_c('i',{staticClass:\"iconfont icon-r-yes\",staticStyle:{\"font-size\":\"22px\"}}),_vm._v(\" 确定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div style=\"width: 1000px; margin: 50px auto\">\r\n    <el-form :model=\"good\">\r\n      <el-form-item label=\"商品名称\" label-width=\"150px\">\r\n        <el-input\r\n          v-model=\"good.name\"\r\n          autocomplete=\"off\"\r\n          style=\"width: 80%\"\r\n        ></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"商品描述\" label-width=\"150px\">\r\n        <el-input\r\n          v-model=\"good.description\"\r\n          autocomplete=\"off\"\r\n          style=\"width: 80%\"\r\n        ></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"规格\" label-width=\"150px\">\r\n        <el-tag\r\n          closable\r\n          @close=\"handleClose(standard)\"\r\n          :disable-transitions=\"true\"\r\n          style=\"margin-right: 10px\"\r\n          v-for=\"(standard, index) in standards\"\r\n          :key=\"index\"\r\n          @click=\"editStandard(index)\"\r\n          >{{ standard.value }}</el-tag\r\n        >\r\n        <el-button icon=\"el-icon-plus\" circle @click=\"addStandard\"></el-button>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"折扣\" label-width=\"150px\">\r\n        <el-input\r\n          v-model=\"good.discount\"\r\n          autocomplete=\"off\"\r\n          style=\"width: 80%\"\r\n        ></el-input>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"分类\" label-width=\"150px\">\r\n        <el-select v-model=\"good.categoryId\" placeholder=\"请选择\">\r\n          <el-option\r\n            v-for=\"item in categoryItems\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"商品图片\" label-width=\"150px\">\r\n        <el-upload\r\n          class=\"upload-demo\"\r\n          ref=\"upload\"\r\n          :action=\"baseApi + '/file/upload'\"\r\n          :file-list=\"fileList\"\r\n          :on-change=\"handleChange\"\r\n          :limit=\"1\"\r\n          :on-remove=\"handleRemove\"\r\n          :on-success=\"handleImgSuccess\"\r\n          :auto-upload=\"false\"\r\n        >\r\n          <el-button slot=\"trigger\" size=\"small\" type=\"primary\"\r\n            >选取文件</el-button\r\n          >\r\n          <div slot=\"tip\" class=\"el-upload__tip\">\r\n            只能上传一个jpg/png文件，且不超过500kb\r\n          </div>\r\n        </el-upload>\r\n      </el-form-item>\r\n      <el-form-item label-width=\"150px\">\r\n        <el-button type=\"success\" @click=\"submit\" style=\"font-size: 20px;\">\r\n          <i class=\"iconfont icon-r-yes\" style=\"font-size: 22px;\"></i>提交</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!-- 弹窗   -->\r\n    <el-dialog\r\n      title=\"规格信息\"\r\n      :visible.sync=\"dialogFormVisible\"\r\n      width=\"30%\"\r\n      :close-on-click-modal=\"false\"\r\n    >\r\n      <el-form :model=\"standard\">\r\n        <el-form-item label=\"规格名称\" label-width=\"150px\">\r\n          <el-input\r\n            v-model=\"standard.value\"\r\n            autocomplete=\"off\"\r\n            style=\"width: 80%\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"价格\" label-width=\"150px\">\r\n          <el-input\r\n            v-model=\"standard.price\"\r\n            autocomplete=\"off\"\r\n            style=\"width: 80%\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"库存\" label-width=\"150px\">\r\n          <el-input\r\n            v-model=\"standard.store\"\r\n            autocomplete=\"off\"\r\n            style=\"width: 80%\"\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\" style=\"font-size: 20px;\"><i class=\"iconfont icon-r-left\" style=\"font-size: 22px;\"></i> 取消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveStandard\" style=\"font-size: 20px;\"><i class=\"iconfont icon-r-yes\" style=\"font-size: 22px;\"></i> 确定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport API from \"@/utils/request\";\r\nconst url = \"/api/good\";\r\nexport default {\r\n  name: \"GoodInfo\",\r\n  data() {\r\n    return {\r\n      baseApi: this.$store.state.baseApi,\r\n      good: {\r\n        discount: \"1\",\r\n      },\r\n      standards: [],\r\n      index: 0,\r\n      standard: {},\r\n      fileList: [],\r\n      dialogFormVisible: false,\r\n      categoryItems: [],\r\n      checkedCategory: {},\r\n    };\r\n  },\r\n  created() {\r\n    this.request.get(\"/api/category\").then((res) => {\r\n      if (res.code === \"200\") {\r\n        this.categoryItems = res.data;\r\n      }\r\n      if (this.$route.query.good) {\r\n        this.good = JSON.parse(this.$route.query.good);\r\n        this.fileList = [{ name: \"原始图片\", url: this.good.imgs }];\r\n        this.checkedCategory = this.categoryItems[this.good.categoryId];\r\n        //从服务器获取商品规格信息\r\n        this.request.get(url + \"/standard/\" + this.good.id).then((res) => {\r\n          if (res.code === \"200\") {\r\n            let standards = JSON.parse(res.data);\r\n            this.standards = standards;\r\n          } else {\r\n            //没有规格\r\n          }\r\n        });\r\n      }\r\n    });\r\n  },\r\n  methods: {\r\n    /*\r\n    规格操作\r\n     */\r\n    editStandard(index) {\r\n      this.standard = this.standards[index];\r\n      this.index = index;\r\n      this.dialogFormVisible = true;\r\n    },\r\n    addStandard() {\r\n      this.standard = {};\r\n      this.index = this.standards.length;\r\n      this.dialogFormVisible = true;\r\n    },\r\n    saveStandard() {\r\n      if (this.standard.value == undefined || this.standard.value == \"\") {\r\n        \r\n        this.$message({\r\n          type: \"error\",\r\n          message: \"请输入规格名称\",\r\n          showClose: true,\r\n        });\r\n        return;\r\n      }\r\n      if (this.standard.price == undefined || this.standard.price == \"\") {\r\n        this.$message({\r\n          type: \"error\",\r\n          message: \"请输入价格\",\r\n          showClose: true,\r\n        });\r\n        return;\r\n      }\r\n      if (this.standard.store == undefined || this.standard.store == \"\") {\r\n        this.$message({\r\n          type: \"error\",\r\n          message: \"请输入库存\",\r\n          showClose: true,\r\n        });\r\n        return;\r\n      }\r\n      this.standards[this.index] = this.standard;\r\n      this.dialogFormVisible = false;\r\n    },\r\n    handleClose(standard) {\r\n      this.standards.splice(this.standards.indexOf(standard), 1);\r\n    },\r\n    /*\r\n    文件上传操作\r\n     */\r\n    handleImgSuccess(res) {\r\n      this.good.imgs = res.data;\r\n      this.save();\r\n    },\r\n    handleChange(file, fileList) {\r\n      this.fileList = fileList.slice(-3);\r\n    },\r\n    handleRemove() {\r\n      this.fileList.pop();\r\n    },\r\n    /*\r\n    保存数据操作\r\n     */\r\n    //点击提交按钮\r\n    submit() {\r\n      if (this.good.name == undefined || this.good.name.trim() == \"\") {\r\n        this.$message({\r\n          type: \"error\",\r\n          message: \"请输入商品名称\",\r\n          showClose: true,\r\n        });\r\n        return false;\r\n      }\r\n      if (\r\n        this.good.description == undefined ||\r\n        this.good.description.trim() == \"\"\r\n      ) {\r\n        this.$message({\r\n          type: \"error\",\r\n          message: \"请输入商品描述\",\r\n          showClose: true,\r\n        });\r\n        return false;\r\n      }\r\n      if (this.standards.length === 0) {\r\n        this.$message({\r\n          type: \"error\",\r\n          message: \"请至少添加一个规格\",\r\n          showClose: true,\r\n        });\r\n        return false;\r\n      }\r\n      if (this.good.discount == undefined || this.good.discount === \"\") {\r\n        this.$message({\r\n          type: \"error\",\r\n          message: \"请输入商品折扣\",\r\n          showClose: true,\r\n        });\r\n        return false;\r\n      }\r\n      if (\r\n        this.good.categoryId == undefined\r\n      ) {\r\n        this.$message({\r\n          type: \"error\",\r\n          message: \"请选择商品分类\",\r\n          showClose: true,\r\n        });\r\n        return false;\r\n      }\r\n      if (this.fileList.length === 0) {\r\n        this.$message({\r\n          type: \"error\",\r\n          message: \"请上传图片\",\r\n          showClose: true,\r\n        });\r\n        return false;\r\n      }\r\n      // 先上传图片再保存数据\r\n      if (this.fileList[0].status === \"ready\") {\r\n        this.$refs.upload.submit();\r\n      } else if (this.fileList[0].status === \"success\") {\r\n        //没有修改初始的图片。直接保存数据\r\n        this.save();\r\n      }\r\n    },\r\n    //保存数据\r\n    save() {\r\n      API.post(url, this.good).then((res2) => {\r\n        if (res2.code === \"200\") {\r\n          this.good.id = res2.data;\r\n          this.request\r\n            .post(url + \"/standard?goodId=\" + this.good.id, this.standards)\r\n            .then((res) => {\r\n              if (res.code === \"200\") {\r\n                this.$message({\r\n                  type: \"success\",\r\n                  message: \"操作成功\",\r\n                  showClose: true,\r\n                });\r\n                this.$router.go(-1);\r\n              } else {\r\n                this.$message({\r\n                  type: \"error\",\r\n                  message: \"操作失败\",\r\n                  showClose: true,\r\n                });\r\n              }\r\n            });\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: res2.msg,\r\n          });\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GoodInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GoodInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GoodInfo.vue?vue&type=template&id=76c0d79e&scoped=true&\"\nimport script from \"./GoodInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./GoodInfo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"76c0d79e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","good","model","value","callback","$$v","$set","expression","_l","standard","index","key","on","$event","handleClose","editStandard","_v","_s","addStandard","item","id","name","ref","staticClass","baseApi","fileList","handleChange","handleRemove","handleImgSuccess","slot","submit","dialogFormVisible","saveStandard","staticRenderFns","url","data","$store","state","discount","standards","categoryItems","checkedCategory","created","request","get","then","res","code","$route","query","JSON","parse","categoryId","methods","length","undefined","price","store","$message","type","message","showClose","splice","indexOf","imgs","save","file","slice","pop","trim","status","$refs","upload","API","res2","post","msg","component"],"sourceRoot":""}