"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[544],{1544:function(e,t,o){o.r(t),o.d(t,{default:function(){return u}});var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticStyle:{width:"60%",margin:"30px auto"}},[o("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"success",icon:"iconfont icon-r-add",circle:""},on:{click:function(t){e.addDialogFormVisible=!0}}}),o("el-table",{attrs:{data:e.icons,stripe:""}},[o("el-table-column",{attrs:{type:"expand",label:"下级分类",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-table",{attrs:{data:t.row.categories,"header-cell-style":{background:"#cbefea",color:"black"}}},[o("el-table-column",{attrs:{label:"分类id",prop:"id"}}),o("el-table-column",{attrs:{label:"分类名称",prop:"name"}}),o("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){return e.handleEditCategory(t.row)}}},[e._v("修改")]),o("el-popconfirm",{attrs:{title:"确定删除？"},on:{confirm:function(o){return e.deleteCategory(t.row)}}},[o("el-button",{attrs:{slot:"reference",type:"danger",size:"mini"},slot:"reference"},[e._v("删除")])],1)]}}],null,!0)})],1)]}}])}),o("el-table-column",{attrs:{label:"id",prop:"id",width:"60px"}}),o("el-table-column",{attrs:{label:"icon"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(t.row.value)}})]}}])}),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary",icon:"el-icon-a-032",circle:""},on:{click:function(o){return e.handleEditIcon(t.row)}}}),o("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"success",icon:"iconfont icon-r-add",circle:""},on:{click:function(o){return e.handleAddCategory(t.row)}}}),o("el-popconfirm",{attrs:{title:"确定删除？"},on:{confirm:function(o){return e.deleteIcon(t.row.id)}}},[o("el-button",{staticStyle:{"font-size":"18px","margin-left":"10px"},attrs:{slot:"reference",type:"danger",icon:"iconfont icon-r-delete",circle:""},slot:"reference"})],1)]}}])})],1)],1),o("el-dialog",{attrs:{title:"修改上级分类",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{attrs:{model:e.icon}},[o("el-form-item",{attrs:{label:"图标","label-width":"100px"}},[o("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.icon.value)}})]),o("el-form-item",{attrs:{label:"更改图标","label-width":"100px"}},[o("el-select",{attrs:{placeholder:"请选择图标"},model:{value:e.icon.value,callback:function(t){e.$set(e.icon,"value",t)},expression:"icon.value"}},e._l(e.iconStore,(function(t){return o("el-option",{key:t,attrs:{value:t}},[o("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(t)}})])})),1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticStyle:{"font-size":"20px"},on:{click:function(t){e.dialogFormVisible=!1}}},[o("i",{staticClass:"iconfont icon-r-left",staticStyle:{"font-size":"22px"}}),e._v(" 取消")]),o("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"primary"},on:{click:e.editIcon}},[o("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"22px"}}),e._v(" 确定")])],1)],1),o("el-dialog",{attrs:{title:"新增上级分类",visible:e.addDialogFormVisible},on:{"update:visible":function(t){e.addDialogFormVisible=t}}},[o("el-form",{attrs:{model:e.addIcon}},[o("el-form-item",{attrs:{label:"图标","label-width":"100px"}},[o("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.addIcon.value)}})]),o("el-form-item",{attrs:{label:"更改图标","label-width":"100px"}},[o("el-select",{attrs:{placeholder:"请选择图标"},model:{value:e.addIcon.value,callback:function(t){e.$set(e.addIcon,"value",t)},expression:"addIcon.value"}},e._l(e.iconStore,(function(t){return o("el-option",{key:t,attrs:{value:t}},[o("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(t)}})])})),1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticStyle:{"font-size":"20px"},on:{click:function(t){e.addDialogFormVisible=!1}}},[o("i",{staticClass:"iconfont icon-r-left",staticStyle:{"font-size":"22px"}}),e._v(" 取消")]),o("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"primary"},on:{click:e.saveIcon}},[o("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"22px"}}),e._v(" 确定")])],1)],1)],1)},n=[],s=(o(3210),o(8309),o(8862),o(5972),["&#xe600;","&#xe8c7;","&#xe617;","&#xe709;","&#xe618;","&#xe601;","&#xe631;","&#xe73d;","&#xe60a;","&#xe609;","&#xe608;","&#xe607;","&#xe606;","&#xe605;","&#xe604;","&#xe603;","&#xe602;"]),a={iconStore:s},l={name:"Category",data:function(){return{options:[],searchText:"",user:{},iconStore:a.iconStore,icons:[],icon:{},addIcon:{},pageNum:1,pageSize:5,entity:{},total:0,dialogFormVisible:!1,addDialogFormVisible:!1}},created:function(){this.user=localStorage.getItem("user")?JSON.parse(sessionStorage.getItem("user")):{},this.load(),console.log(this.iconStore)},methods:{load:function(){var e=this;this.request.get("/api/icon").then((function(t){e.icons=t.data}))},handleEditCategory:function(e){var t=this;this.$prompt("请输入修改后的名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(o){var i=o.value;null!=i&&void 0!=i&&""!=i.trim()?(e.name=i,t.request.post("/api/category",e).then((function(e){"200"===e.code?t.$message.success("修改成功"):t.$message.error("修改失败")}))):t.$message.error("请输入名称")}))},handleAddCategory:function(e){var t=this;this.$prompt("请输入新增的下级分类名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(o){var i=o.value;null!=i&&void 0!=i&&""!=i.trim()?t.request.post("/api/category/add",{name:i,iconId:e.id}).then((function(e){"200"===e.code?(t.$message.success("新增成功"),t.load()):t.$message.error("新增失败")})):t.$message.error("请输入名称")}))},handleEditIcon:function(e){this.icon=JSON.parse(JSON.stringify(e)),this.dialogFormVisible=!0},editIcon:function(){var e=this;delete this.icon.categories,this.request.post("/api/icon",this.icon).then((function(t){"200"===t.code?(e.$message.success("修改成功"),e.dialogFormVisible=!1):e.$message.error("修改失败")}))},saveIcon:function(){var e=this;void 0!=this.addIcon.value?this.request.post("/api/icon",this.addIcon).then((function(t){console.log(t),"200"===t.code?(e.$message.success("新增成功"),e.addDialogFormVisible=!1,e.load()):e.$message.error("新增失败")})):this.$message.error("请选择上级分类图标")},deleteIcon:function(e){var t=this;this.request.get("/api/icon/delete?id="+e).then((function(e){"200"==e.code?(t.$message.success("删除成功"),t.load()):t.$message.error(e.msg)}))},deleteCategory:function(e){var t=this;this.request.get("/api/category/delete?id="+e.id).then((function(e){"200"==e.code?(t.$message.success("删除成功"),t.load()):t.$message.error(e.msg)}))}}},r=l,c=o(1001),d=(0,c.Z)(r,i,n,!1,null,"5435a8df",null),u=d.exports}}]);
//# sourceMappingURL=544-legacy.21194f07.js.map