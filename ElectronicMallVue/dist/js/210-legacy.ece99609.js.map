{"version":3,"file":"js/210-legacy.ece99609.js","mappings":"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","sources":["webpack://vue/./src/views/Person.vue?fad2","webpack://vue/src/views/Person.vue","webpack://vue/./src/views/Person.vue?1bc6","webpack://vue/./src/views/Person.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{staticClass:\"card\"},[_c('div',{staticStyle:{\"text-align\":\"center\",\"margin-bottom\":\"30px\"}},[_c('b',[_vm._v(\"修改个人信息\")])]),_c('el-form',{attrs:{\"label-width\":\"60px\"}},[_c('el-form-item',{attrs:{\"label\":\"头像\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.baseApi + '/avatar',\"headers\":_vm.token,\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess}},[(_vm.form.avatarUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.baseApi + _vm.form.avatarUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',{attrs:{\"label\":\"昵称\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.nickname),callback:function ($$v) {_vm.$set(_vm.form, \"nickname\", $$v)},expression:\"form.nickname\"}})],1),_c('el-form-item',{attrs:{\"label\":\"电话\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.phone),callback:function ($$v) {_vm.$set(_vm.form, \"phone\", $$v)},expression:\"form.phone\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.email),callback:function ($$v) {_vm.$set(_vm.form, \"email\", $$v)},expression:\"form.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"地址\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.address),callback:function ($$v) {_vm.$set(_vm.form, \"address\", $$v)},expression:\"form.address\"}})],1),_c('el-button',{staticStyle:{\"font-size\":\"20px\",\"margin-left\":\"190px\",\"margin-top\":\"20px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_c('i',{staticClass:\"iconfont icon-r-yes\",staticStyle:{\"font-size\":\"22px\"}}),_vm._v(\" 确定\")])],1),_c('el-popover',{attrs:{\"placement\":\"right\",\"width\":\"200\",\"trigger\":\"click\"}},[_c('el-form',[_c('el-form-item',{attrs:{\"label\":\"新密码\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"autocomplete\":\"off\"},model:{value:(_vm.resetPsw.newPassword),callback:function ($$v) {_vm.$set(_vm.resetPsw, \"newPassword\", $$v)},expression:\"resetPsw.newPassword\"}})],1),_c('el-form-item',{attrs:{\"label\":\"确认密码\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"autocomplete\":\"off\"},model:{value:(_vm.resetPsw.confirmPassword),callback:function ($$v) {_vm.$set(_vm.resetPsw, \"confirmPassword\", $$v)},expression:\"resetPsw.confirmPassword\"}})],1),_c('el-button',{staticStyle:{\"font-size\":\"20px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.toResetPassword}},[_c('i',{staticClass:\"iconfont icon-r-yes\",staticStyle:{\"font-size\":\"22px\"}}),_vm._v(\" 确定\")])],1),_c('el-button',{staticStyle:{\"margin-left\":\"190px\",\"margin-top\":\"20px\",\"font-size\":\"20px\"},attrs:{\"slot\":\"reference\",\"type\":\"warning\"},on:{\"click\":function($event){_vm.resetPsw = { newPassword: '', confirmPassword: '' }}},slot:\"reference\"},[_c('i',{staticClass:\"iconfont icon-r-lock\",staticStyle:{\"font-size\":\"22px\"}}),_vm._v(\" 重置密码\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-card class=\"card\">\r\n    <div style=\"text-align: center; margin-bottom: 30px\">\r\n      <b>修改个人信息</b>\r\n    </div>\r\n\r\n    <el-form label-width=\"60px\">\r\n      <el-form-item label=\"头像\">\r\n        <el-upload\r\n          class=\"avatar-uploader\"\r\n          :action=\"baseApi + '/avatar'\"\r\n          :headers=\"token\"\r\n          :show-file-list=\"false\"\r\n          :on-success=\"handleAvatarSuccess\"\r\n        >\r\n          <img\r\n            v-if=\"form.avatarUrl\"\r\n            :src=\"baseApi + form.avatarUrl\"\r\n            class=\"avatar\"\r\n          />\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"昵称\">\r\n        <el-input v-model=\"form.nickname\" autocomplete=\"off\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"电话\">\r\n        <el-input v-model=\"form.phone\" autocomplete=\"off\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"邮箱\">\r\n        <el-input v-model=\"form.email\" autocomplete=\"off\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"地址\">\r\n        <el-input v-model=\"form.address\" autocomplete=\"off\"></el-input>\r\n      </el-form-item>\r\n      <el-button\r\n        type=\"primary\"\r\n        style=\"font-size: 20px;margin-left: 190px; margin-top: 20px\"\r\n        @click=\"save\"><i class=\"iconfont icon-r-yes\" style=\"font-size: 22px;\"></i> 确定</el-button\r\n      >\r\n    </el-form>\r\n    <el-popover placement=\"right\" width=\"200\" trigger=\"click\">\r\n      <el-form>\r\n        <el-form-item label=\"新密码\">\r\n          <el-input\r\n            type=\"password\"\r\n            v-model=\"resetPsw.newPassword\"\r\n            autocomplete=\"off\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"确认密码\">\r\n          <el-input\r\n            type=\"password\"\r\n            v-model=\"resetPsw.confirmPassword\"\r\n            autocomplete=\"off\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-button style=\"font-size: 15px;font-size: 20px;\" type=\"primary\" @click=\"toResetPassword\"\r\n          ><i class=\"iconfont icon-r-yes\" style=\"font-size: 22px;\"></i> 确定</el-button\r\n        >\r\n      </el-form>\r\n      <el-button\r\n        slot=\"reference\"\r\n        type=\"warning\"\r\n        style=\"margin-left: 190px; margin-top: 20px; font-size: 20px;\"\r\n        @click=\"resetPsw = { newPassword: '', confirmPassword: '' }\"\r\n        ><i class=\"iconfont icon-r-lock\" style=\"font-size: 22px;\"></i> 重置密码</el-button\r\n      >\r\n    </el-popover>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nimport md5 from \"js-md5\";\r\n\r\n\r\nexport default {\r\n  name: \"Person\",\r\n  data() {\r\n    return {\r\n      form: {},\r\n      baseApi: this.$store.state.baseApi,\r\n      user: localStorage.getItem(\"user\")\r\n        ? JSON.parse(localStorage.getItem(\"user\"))\r\n        : {},\r\n      resetPsw: {\r\n        newPassword: \"\",\r\n        confirmPassword: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    toResetPassword() {\r\n      // 重置密码\r\n      if (this.resetPsw.newPassword.trim() == \"\") {\r\n        this.$message.error(\"新密码不能为空\");\r\n        return;\r\n      }\r\n      if (this.resetPsw.confirmPassword != this.resetPsw.newPassword) {\r\n        this.$message.error(\"两次密码不一致\");\r\n        return;\r\n      }\r\n      this.request\r\n        .get(\r\n          \"/user/resetPassword?id=\" +\r\n            this.user.id +\r\n            \"&newPassword=\" +\r\n            md5(this.resetPsw.newPassword)\r\n        )\r\n        .then((res) => {\r\n          if (res.code === \"200\") {\r\n            this.$message.success(\"修改成功\");\r\n            this.resetPsw = {\r\n              newPassword: \"\",\r\n              confirmPassword: \"\",\r\n            };\r\n          } else {\r\n            alert(res.msg);\r\n          }\r\n        });\r\n    },\r\n    //图片上传成功钩子\r\n    handleAvatarSuccess(res) {\r\n      this.imageUrl = res.data;\r\n      this.form.avatarUrl = this.imageUrl;\r\n    },\r\n    //提交事件\r\n    save() {\r\n      //把表格传给后台，保存到数据库\r\n      this.request.post(\"/user\", this.form).then((res) => {\r\n        if (res.code === \"200\") {\r\n          this.$message.success(\"保存成功\");\r\n          //把表格的数据更新到user中\r\n          for (let key in this.form) {\r\n            this.user[key] = this.form[key];\r\n          }\r\n          //更新localstorage的user\r\n          localStorage.setItem(\"user\", JSON.stringify(this.user));\r\n          this.$emit(\"refresh\");\r\n          this.$router.go(0);\r\n        } else {\r\n          this.$message.error(res.msg);\r\n        }\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    this.request.get(\"/userinfo/\" + this.user.username).then((res) => {\r\n      if (res.code === \"200\") {\r\n        this.form = res.data;\r\n      } else {\r\n        alert(res.msg);\r\n      }\r\n    });\r\n    // this.form = this.user;\r\n  },\r\n  mounted() {\r\n    \r\n  },\r\n  computed: {\r\n    token() {\r\n      return { token: this.user.token };\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.card {\r\n  width: 500px;\r\n  margin: 80px auto;\r\n  padding: 30px;\r\n}\r\n.avatar-uploader {\r\n  padding-bottom: 10px;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 138px;\r\n  height: 138px;\r\n  line-height: 138px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 138px;\r\n  height: 138px;\r\n  display: block;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Person.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Person.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Person.vue?vue&type=template&id=42ee20b8&scoped=true&\"\nimport script from \"./Person.vue?vue&type=script&lang=js&\"\nexport * from \"./Person.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Person.vue?vue&type=style&index=0&id=42ee20b8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"42ee20b8\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","_v","attrs","baseApi","token","handleAvatarSuccess","form","avatarUrl","model","value","callback","$$v","$set","expression","on","save","resetPsw","toResetPassword","$event","newPassword","confirmPassword","slot","staticRenderFns","name","data","$store","state","user","localStorage","getItem","JSON","methods","trim","request","get","md5","then","alert","$message","error","res","imageUrl","post","code","setItem","stringify","created","username","msg","mounted","computed","component"],"sourceRoot":""}