"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[469],{6469:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("el-select",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{placeholder:"请选择订单类型"},model:{value:t.searchMode,callback:function(e){t.searchMode=e},expression:"searchMode"}},[a("el-option",{attrs:{value:"已支付",label:"已支付"}}),a("el-option",{attrs:{value:"已发货",label:"已发货"}}),a("el-option",{attrs:{value:"已收货",label:"已收货"}})],1),a("el-input",{staticStyle:{width:"200px"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.load.apply(null,arguments)}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}},[a("i",{staticClass:"el-input__icon iconfont icon-r-find",attrs:{slot:"prefix"},slot:"prefix"})]),a("el-button",{staticStyle:{margin:"10px"},attrs:{type:"warning"},on:{click:t.reset}},[a("i",{staticClass:"iconfont icon-r-refresh"}),t._v(" 重置 ")]),a("el-button",{staticStyle:{margin:"10px"},attrs:{type:"primary"},on:{click:t.load}},[a("i",{staticClass:"iconfont icon-r-find"}),t._v(" 搜索 ")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50",sortable:""}}),a("el-table-column",{attrs:{prop:"orderNo",label:"订单编号",width:"200"}}),a("el-table-column",{attrs:{prop:"totalPrice",label:"总价",width:"100"}}),a("el-table-column",{attrs:{prop:"userId",label:"下单人id",width:"100"}}),a("el-table-column",{attrs:{prop:"linkUser",label:"联系人",width:"150"}}),a("el-table-column",{attrs:{prop:"linkPhone",label:"联系电话"}}),a("el-table-column",{attrs:{prop:"linkAddress",label:"送货地址",width:"300"}}),a("el-table-column",{attrs:{prop:"state",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["已支付"===e.row.state?a("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.row.state))]):t._e(),"已发货"===e.row.state?a("el-tag",{attrs:{type:"primary"}},[t._v(t._s(e.row.state))]):t._e(),"已收货"===e.row.state?a("el-tag",{attrs:{type:"info"}},[t._v(t._s(e.row.state))]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"下单时间"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:function(a){return t.showDetail(e.row)}}},[a("i",{staticClass:"iconfont icon-r-find",staticStyle:{"font-size":"22px"}}),t._v(" 详情 ")]),"已支付"===e.row.state?a("el-popconfirm",{attrs:{title:"确定发货吗？"},on:{confirm:function(a){return t.delivery(e.row)}}},[a("el-button",{staticStyle:{"font-size":"18px","margin-left":"10px"},attrs:{slot:"reference",type:"primary"},slot:"reference"},[a("i",{staticClass:"iconfont icon-r-add",staticStyle:{"font-size":"22px"}}),t._v(" 发货 ")])],1):t._e()]}}])})],1),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":t.pageNum,"page-size":t.pageSize,"page-sizes":[3,5,8,10],layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-table",{attrs:{data:t.detail,"background-color":"black"}},[a("el-table-column",{attrs:{label:"图片",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:t.baseApi+e.row.img,"min-width":"100",height:"100"}})]}}])}),a("el-table-column",{attrs:{prop:"goodId",label:"商品id"}}),a("el-table-column",{attrs:{prop:"goodName",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"standard",label:"商品规格"}}),a("el-table-column",{attrs:{prop:"price",label:"单价"}}),a("el-table-column",{attrs:{prop:"discount",label:"折扣"}}),a("el-table-column",{attrs:{label:"实价"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.price*e.row.discount)+" ")]}}])}),a("el-table-column",{attrs:{prop:"count",label:"数量"}}),a("el-table-column",{attrs:{label:"总价"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.price*e.row.discount*e.row.count)+" ")]}}])})],1)],1)],1)},r=[],o=a(5972),s="/api/order/",i={name:"Order",data:function(){return{options:[],searchMode:"",searchText:"",user:{},tableData:[],pageNum:1,pageSize:8,entity:{},total:0,dialogFormVisible:!1,detail:[],baseApi:this.$store.state.baseApi}},created:function(){this.load()},methods:{handleSizeChange:function(t){this.pageSize=t,this.load()},handleCurrentChange:function(t){this.pageNum=t,this.load()},reset:function(){this.searchMode="",this.searchText="",this.load()},load:function(){var t=this;o.Z.get(s+"/page",{params:{pageNum:this.pageNum,pageSize:this.pageSize,orderNo:this.searchText,state:this.searchMode}}).then((function(e){t.tableData=e.data.records||[],t.total=e.data.total})).catch((function(e){void 0==e.response.data?t.$message({showClose:!0,message:e,type:"error",duration:5e3}):t.$message({showClose:!0,message:e.response.data,type:"error",duration:5e3})}))},showDetail:function(t){var e=this;this.request.get("/api/order/orderNo/"+t.orderNo).then((function(t){"200"===t.code&&(e.detail=[],e.detail.push(t.data),e.dialogFormVisible=!0)}))},delivery:function(t){var e=this;this.request.get("/api/order/delivery/"+t.orderNo).then((function(a){"200"===a.code&&(e.$message.success("成功发货"),t.state="已发货")}))}}},n=i,c=a(1001),u=(0,c.Z)(n,l,r,!1,null,"89b56188",null),p=u.exports}}]);
//# sourceMappingURL=469-legacy.378454ab.js.map