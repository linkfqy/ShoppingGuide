"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[905],{2905:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticStyle:{height:"100%",width:"100%"}},[a("el-header",{staticStyle:{"background-color":"white"}},[a("Navagation",{attrs:{user:t.user,role:t.role,"login-status":t.loginStatus}})],1),a("el-main",{staticStyle:{"background-color":"lightgrey",width:"100%"}},[a("router-view")],1)],1)},r=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navagation"},[a("el-row",[a("el-col",{attrs:{span:3}},[a("div",{staticStyle:{"font-size":"20px","font-weight":"bold","text-align":"center"}},[a("a",{attrs:{href:"/"}},[a("i",{staticClass:"el-icon-a-011",staticStyle:{"font-size":"24px"}}),t._v(" 在线商城")])])]),a("el-col",{attrs:{span:17}},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal",router:""}},[a("el-menu-item",{staticClass:"menu-item",attrs:{index:"/"}},[t._v("商城首页")]),a("el-menu-item",{staticClass:"menu-item",attrs:{index:"/goodList"}},[t._v("商品分类")]),a("el-menu-item",{staticClass:"menu-item",attrs:{index:"/cart"}},[t._v("我的购物车")]),a("el-menu-item",{staticClass:"menu-item",attrs:{index:"/orderlist"}},[t._v("我的订单")]),"admin"===t.role?a("el-menu-item",{staticClass:"menu-item",attrs:{index:"/manage"}},[t._v("后台管理")]):t._e()],1)],1),a("el-col",{attrs:{span:4}},[a("el-dropdown",{staticStyle:{cursor:"pointer",float:"right","margin-right":"60px"}},[a("span",{staticClass:"el-dropdown-link"},[a("div",{staticStyle:{display:"inline-block"}},[null!=t.user.avatarUrl?a("img",{staticClass:"avatar",attrs:{src:t.baseApi+t.user.avatarUrl}}):t._e(),t._v(" "+t._s(t.user.nickname)+" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"margin-right":"5px"}})])]),a("el-dropdown-menu",{staticStyle:{"text-align":"center"},attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loginStatus,expression:"!loginStatus"}],on:{click:function(e){return t.$router.push({path:"/login",query:{to:"/"}})}}},[t._v(" 登录 ")])]),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:t.loginStatus,expression:"loginStatus"}]},[a("div",{on:{click:function(e){return t.$router.push("/person")}}},[t._v("个人信息")])]),a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:t.loginStatus,expression:"loginStatus"}]},[a("div",{on:{click:t.logout}},[t._v("退出")])])],1)],1)],1)],1)],1)},o=[],l={name:"Navagation",props:{user:Object,loginStatus:Boolean,role:String},data(){return{activeIndex:"1",activeIndex2:"1",baseApi:this.$store.state.baseApi}},methods:{logout(){localStorage.removeItem("user"),this.$router.go(0),this.$message.success("退出成功")}}},n=l,u=a(1001),c=(0,u.Z)(n,i,o,!1,null,null,null),m=c.exports,d=a(5972),g={name:"Front",data(){return{user:{},role:"user",loginStatus:!1}},methods:{getUser(){let t=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).username:"";t&&this.request.get("/userinfo/"+t).then((t=>{this.user=t.data,console.log(this.user.role)}))}},components:{Navagation:m},created(){localStorage.getItem("user")?d.Z.post("http://localhost:9191/role").then((t=>{"200"===t.code?(this.role=t.data,localStorage.getItem("user")&&(this.user=JSON.parse(localStorage.getItem("user")),this.loginStatus=!0)):(this.user={nickname:"您未登录",avatarUrl:null},localStorage.removeItem("user"),this.loginStatus=!1)})):(this.user={nickname:"您未登录",avatarUrl:null},this.loginStatus=!1)}},h=g,v=(0,u.Z)(h,s,r,!1,null,"16c16dc5",null),p=v.exports}}]);
//# sourceMappingURL=905.6f1cfe76.js.map