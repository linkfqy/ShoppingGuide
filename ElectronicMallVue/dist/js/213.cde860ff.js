"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[213],{8213:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"demo-input-size"},[a("el-select",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{placeholder:"请选择"},model:{value:e.searchMode,callback:function(t){e.searchMode=t},expression:"searchMode"}},[a("el-option",{attrs:{value:"id",label:"用户id"}}),a("el-option",{attrs:{value:"username",label:"账号"}}),a("el-option",{attrs:{value:"nickname",label:"昵称"}})],1),"id"===e.searchMode?a("el-input",{staticStyle:{width:"250px","padding-right":"5px"},attrs:{placeholder:"请输入用户id","prefix-icon":"el-icon-search"},model:{value:e.searchParams.id,callback:function(t){e.$set(e.searchParams,"id",t)},expression:"searchParams.id"}}):e._e(),"username"===e.searchMode?a("el-input",{staticStyle:{width:"250px","padding-right":"5px"},attrs:{placeholder:"请输入账号","prefix-icon":"el-icon-search"},model:{value:e.searchParams.username,callback:function(t){e.$set(e.searchParams,"username",t)},expression:"searchParams.username"}}):e._e(),"nickname"===e.searchMode?a("el-input",{staticStyle:{width:"250px","padding-right":"5px"},attrs:{placeholder:"请输入昵称","prefix-icon":"el-icon-search"},model:{value:e.searchParams.nickname,callback:function(t){e.$set(e.searchParams,"nickname",t)},expression:"searchParams.nickname"}}):e._e(),a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[a("i",{staticClass:"iconfont icon-r-find",staticStyle:{"padding-right":"6px"}}),e._v(" 搜索 ")]),a("el-button",{attrs:{type:"warning"},on:{click:e.reload}},[a("i",{staticClass:"iconfont icon-r-refresh",staticStyle:{"padding-right":"6px"}}),e._v(" 重置 ")])],1),a("div",{staticStyle:{"padding-top":"10px"}},[a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"primary"},on:{click:e.handleAdd}},[a("i",{staticClass:"iconfont icon-r-add",staticStyle:{"padding-right":"6px","font-size":"22px"}}),e._v(" 新增")]),a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"danger"},on:{click:e.delBatch}},[a("i",{staticClass:"iconfont icon-r-delete",staticStyle:{"padding-right":"6px","font-size":"22px"}}),e._v(" 批量删除")])],1),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{staticStyle:{padding:"0 60px"},attrs:{"label-width":"50px"}},["新增用户"==e.dialogTitle?a("el-form-item",{attrs:{label:"账号"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1):e._e(),"新增用户"==e.dialogTitle?a("el-form-item",{attrs:{label:"密码"}},[e._v(" 123456 ")]):e._e(),a("el-form-item",{attrs:{label:"昵称"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.user.nickname,callback:function(t){e.$set(e.user,"nickname",t)},expression:"user.nickname"}})],1),a("el-form-item",{attrs:{label:"身份"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.user.role,callback:function(t){e.$set(e.user,"role",t)},expression:"user.role"}},e._l(e.roleOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.user.address,callback:function(t){e.$set(e.user,"address",t)},expression:"user.address"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{"font-size":"20px"},on:{click:function(t){e.dialogFormVisible=!1}}},[a("i",{staticClass:"iconfont icon-r-left",staticStyle:{"font-size":"22px"}}),e._v(" 取消")]),a("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"primary"},on:{click:e.save}},[a("i",{staticClass:"iconfont icon-r-yes",staticStyle:{"font-size":"22px"}}),e._v(" 确定")])],1)],1),a("el-table",{attrs:{data:e.tableData,"background-color":"black"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),a("el-table-column",{attrs:{prop:"id",label:"id",width:"100"}}),a("el-table-column",{attrs:{prop:"username",label:"账号",width:"150"}}),a("el-table-column",{attrs:{label:"身份",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return["user"===t.row.role?a("span",[e._v("用户")]):e._e(),"admin"===t.row.role?a("span",[e._v("管理员")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"nickname",label:"昵称",width:"180"}}),a("el-table-column",{attrs:{prop:"phone",label:"电话",width:"180"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"180"}}),a("el-table-column",{attrs:{prop:"address",label:"地址",width:"350"}}),a("el-table-column",{attrs:{label:"操作",width:"250",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"success"},on:{click:function(a){return e.handleEdit(t.row)}}},[a("i",{staticClass:"el-icon-a-032",staticStyle:{"font-size":"22px"}}),e._v(" 编辑 ")]),a("el-button",{staticStyle:{"font-size":"18px"},attrs:{type:"danger"},on:{click:function(a){return e.handleDelete(t.row.id)}}},[a("i",{staticClass:"iconfont icon-r-delete",staticStyle:{"font-size":"22px"}}),e._v(" 删除 ")])]}}])})],1),a("div",{staticClass:"block",staticStyle:{flex:"0 0 auto"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[3,5,8,10],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentPage}})],1)],1)},i=[],l=a(7459),r=a.n(l),n={name:"User",created(){this.load()},data(){return{tableData:[],roleOptions:[{value:"admin",label:"管理员"},{value:"user",label:"用户"}],roleValue:"",total:0,pageSize:5,currentPage:1,searchMode:"id",searchParams:{id:"",username:"",nickname:""},dialogFormVisible:!1,dialogTitle:"",user:{username:"",nickname:"",newPassword:"",role:"",phone:"",email:"",address:""},multipleSelection:[]}},methods:{handleSizeChange(e){this.pageSize=e,this.load()},handleCurrentPage(e){this.currentPage=e,this.load()},handleSelectionChange(e){this.multipleSelection=e},load(){this.request.get("/user/page",{params:{pageNum:this.currentPage,pageSize:this.pageSize,id:this.searchParams.id,username:this.searchParams.username,nickname:this.searchParams.nickname}}).then((e=>{"200"===e.code&&(this.tableData=e.data.records,this.total=e.data.total)}))},search(){this.currentPage=1,this.load()},reload(){this.searchParams.id="",this.searchParams.username="",this.searchParams.nickname="",this.load()},save(){if("新增用户"==this.dialogTitle){if(""==this.user.username.trim())return void this.$message.error("账号不能为空");this.user.newPassword=r()("123456")}""!=this.user.nickname.trim()?""!=this.user.role.trim()?""!=this.user.phone.trim()?""!=this.user.email.trim()?(this.dialogTitle="新增用户",this.request.post("/user",this.user).then((e=>{"200"===e.code?(this.$message.success("保存成功"),this.dialogFormVisible=!1,this.load()):this.$message.error(e.msg)}))):this.$message.error("邮箱不能为空"):this.$message.error("电话不能为空"):this.$message.error("身份不能为空"):this.$message.error("昵称不能为空")},handleAdd(){this.dialogTitle="新增用户",this.dialogFormVisible=!0,this.user={username:"",nickname:"",newPassword:"",role:"",phone:"",email:"",address:""}},handleEdit(e){this.user=JSON.parse(JSON.stringify(e)),this.dialogTitle="编辑用户",this.dialogFormVisible=!0},handleDelete(e){this.$confirm("确认删除该用户吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.request.delete("/user/"+e).then((e=>{"200"===e.code?(this.$message({type:"success",message:"删除成功"}),this.load()):this.$message.error(e.msg)}))}))},delBatch(){let e=this.multipleSelection.map((e=>e.id));console.log(e),this.$confirm("确认删除这些用户吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.request.post("/user/del/batch",e).then((e=>{"200"===e.code?(this.$message({type:"success",message:"删除成功",duration:3e3}),this.load()):this.$message.error(e.msg)}))}))}}},o=n,c=a(1001),u=(0,c.Z)(o,s,i,!1,null,"13f5289f",null),d=u.exports}}]);
//# sourceMappingURL=213.cde860ff.js.map